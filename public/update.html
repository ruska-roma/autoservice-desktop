<!doctype html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <title>Доступна новая версия</title>
    <style>
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      .content {
        padding: 15px;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;
        row-gap: 10px;
        text-align: center;
      }

      #status {
        font-size: 24px;
      }

      #description {
        font-size: 16px;
      }

      #progress {
        width: 100%;
        height: 20px;
      }
    </style>
  </head>
  <body>
    <div class="content">
      <h2 id="status">Загрузка обновления</h2>
      <p id="description">
        Пожалуйста, дождитесь окончания загрузки обновления. Приложение перезапуститься
        автоматически.
      </p>
      <progress id="progress" max="100" value="0"></progress>
    </div>

    <script>
      const { ipcRenderer } = require('electron');

      ipcRenderer.on('update-progress', (_, percent) => {
        document.getElementById('progress').value = percent;
        document.getElementById('status').innerText = `Скачивание: ${percent}%`;
      });

      ipcRenderer.on('update-finished', () => {
        document.getElementById('status').innerText = 'Установка обновления';
      });

      ipcRenderer.on('update-error', (_, msg) => {
        document.getElementById('status').innerText = 'Ошибка обновления';
        document.getElementById('description').innerText = msg;
      });
    </script>
  </body>
</html>
